<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>🇬🇧🇯🇵🇸🇬🇸🇬 CICD Group Activity (by using Jenkins Pipeline) (1)</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.highlight-default_background {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray_background {
	background: rgba(248, 248, 247, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(248, 243, 252, 1);
}
.highlight-pink_background {
	background: rgba(252, 241, 246, 1);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(248, 248, 247, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(248, 243, 252, 1);
}
.block-color-pink_background {
	background: rgba(252, 241, 246, 1);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-default { background-color: rgba(84, 72, 49, 0.08); }
.select-value-color-gray { background-color: rgba(84, 72, 49, 0.15); }
.select-value-color-brown { background-color: rgba(210, 162, 141, 0.35); }
.select-value-color-orange { background-color: rgba(224, 124, 57, 0.27); }
.select-value-color-yellow { background-color: rgba(236, 191, 66, 0.39); }
.select-value-color-green { background-color: rgba(123, 183, 129, 0.27); }
.select-value-color-blue { background-color: rgba(93, 165, 206, 0.27); }
.select-value-color-purple { background-color: rgba(168, 129, 197, 0.27); }
.select-value-color-pink { background-color: rgba(225, 136, 179, 0.27); }
.select-value-color-red { background-color: rgba(244, 171, 159, 0.4); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="24ce65bc-2ec5-8022-8572-de0a497d5442" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/nasa_space_shuttle_columbia.jpg" style="object-position:center 38.27%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">🚀</span></div><h1 class="page-title">🇬🇧🇯🇵🇸🇬🇸🇬 CICD Group Activity (by using Jenkins Pipeline) (1)</h1><p class="page-description"></p></header><div class="page-body"><ul id="24ce65bc-2ec5-8166-a983-cc4abcb75004" class="toggle"><li><details open=""><summary><mark class="highlight-default"><mark class="highlight-default_background"><strong> </strong></mark></mark><mark class="highlight-red"><mark class="highlight-default_background"><strong>Group Activities  🇬🇧🇯🇵🇸🇬🇸🇬 (Netflix Clone Deployment on EKS with Jenkins CI/CD Pipeline) </strong></mark></mark></summary><p id="24ce65bc-2ec5-810c-8a7e-d27974f3fc8b" class="">
</p><h3 id="24ce65bc-2ec5-815f-8144-fcb6579d3225" class=""><strong>Own testing Project (mini) netfilix-clone (by using Jenkins CI/CD PIPE Line) </strong></h3><table id="24ce65bc-2ec5-81b2-ab94-dfc363ebd077" class="simple-table"><tbody><tr id="24ce65bc-2ec5-81d5-b97b-e8bc408a19d9"><td id="B_ND" class="">Group Name</td><td id="RR@T" class="" style="width:437px"><strong>ROBOTs aka </strong><em><strong>(Super Active Guys)</strong></em></td></tr><tr id="24ce65bc-2ec5-818c-a18f-fff1ded528f9"><td id="B_ND" class="">Project Name</td><td id="RR@T" class="" style="width:437px"><code><strong>Netflix Clone Deployment by using Jenkins CICD</strong></code></td></tr><tr id="24ce65bc-2ec5-81cb-9640-cd66d1e8e7db"><td id="B_ND" class="">participants</td><td id="RR@T" class="" style="width:437px"><strong>Ko Than Htike, Ma Ei Mi Mi Aung, Ma Chin Phoo, Ko Teddy</strong></td></tr></tbody></table><p id="24ce65bc-2ec5-81b7-92c6-d155b9c0c265" class=""><strong><span style="border-bottom:0.05em solid">Summary</span></strong></p><p id="24ce65bc-2ec5-8132-b3dc-e9ce705b3d46" class="">To access the movie sample web page deployment by using Jenkins CICD pipeline. by orchestrating cloud nature (AWS, Git, Kubernetes, Sonar, Jenkins, TMB, Docker and so on).  </p><p id="24ce65bc-2ec5-8106-96cb-e3a97940a537" class="">Requirements:   <div class="indented"><ul id="24ce65bc-2ec5-8146-bc8b-fe1fe31f4bd1" class="bulleted-list"><li style="list-style-type:disc"> AWS account with appropriate permissions</li></ul><ul id="24ce65bc-2ec5-8146-89e0-f29b68b0b215" class="bulleted-list"><li style="list-style-type:disc">Terraform installed</li></ul><ul id="24ce65bc-2ec5-81ac-a9a6-c294ed088bd0" class="bulleted-list"><li style="list-style-type:disc">AWS CLI configured</li></ul><ul id="24ce65bc-2ec5-817b-ab24-c0143a66b7b4" class="bulleted-list"><li style="list-style-type:disc">eksctl installed</li></ul><ul id="24ce65bc-2ec5-818c-9847-cadb74f4391b" class="bulleted-list"><li style="list-style-type:disc">Jenkins, SonarQube, and Trivy installed on an EC2 instance</li></ul><ul id="24ce65bc-2ec5-817a-9e1f-c8cece74778e" class="bulleted-list"><li style="list-style-type:disc">GitHub repository: <a href="https://github.com/TEDDY201289/Netflix-test.git">https://github.com/TEDDY201289/Netflix-test.git</a></li></ul><ul id="24ce65bc-2ec5-816d-85ce-c91cca8b313d" class="bulleted-list"><li style="list-style-type:disc">TMDB API key from <a href="https://www.themoviedb.org/settings/api">https://www.themoviedb.org/settings/api</a></li></ul><ul id="24ce65bc-2ec5-815f-a721-c37dc0c4ed3e" class="bulleted-list"><li style="list-style-type:disc">Google account for SMTP configuration (<mark class="highlight-red">Optional</mark>)</li></ul><ul id="24ce65bc-2ec5-819f-9501-d7435f260af4" class="bulleted-list"><li style="list-style-type:disc">Docker installed on the Jenkins EC2 instance</li></ul></div></p><p id="24ce65bc-2ec5-8137-9954-f99c0369fc56" class="">
</p><ol type="1" id="24ce65bc-2ec5-81c6-ae60-d91c32c6cfd5" class="numbered-list" start="1"><li>First of All - needs to have and start with AWS account to create vpc/subent/IGW, EC2 and EKS , so on.</li></ol><figure id="24ce65bc-2ec5-8125-8f18-d6e77a9ff2dd" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image.png"><img style="width:1451.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image.png"/></a></figure><p id="24ce65bc-2ec5-8155-9f44-e5341b2b3200" class="">
</p><p id="24ce65bc-2ec5-8191-a43b-cb18f5661e17" class="">I will use this iam role for this task </p><figure id="24ce65bc-2ec5-811d-bb7c-fb4caa18e083" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%201.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%201.png"/></a></figure><p id="24ce65bc-2ec5-8131-b89c-f53c4f8b6dae" class="">
</p><p id="24ce65bc-2ec5-8163-90f6-e1cbb340e577" class=""><strong>Create the VPC with this below steps:</strong></p><figure id="24ce65bc-2ec5-81e8-a1dd-def9f7a581b1" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%202.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%202.png"/></a></figure><p id="24ce65bc-2ec5-811e-9f7f-c488a04f39de" class="">Then subnet mask, IGW, RTB all are created to allocate for Jenkins server automatically before deploying by terraform.</p><figure id="24ce65bc-2ec5-81f7-bcce-fce3c2e83b7a" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%203.png"><img style="width:1452px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%203.png"/></a></figure><figure id="24ce65bc-2ec5-812f-a9db-dbf8efd8ef04" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%204.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%204.png"/></a></figure><figure id="24ce65bc-2ec5-81d8-a51b-fcf95a7d78c4" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%205.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%205.png"/></a></figure><p id="24ce65bc-2ec5-811c-becb-e71e54087699" class="">
</p><p id="24ce65bc-2ec5-8154-9f21-c1a987987312" class=""><strong>Create Keypair at AWS (pre-creation)</strong></p><figure id="24ce65bc-2ec5-8120-afa1-eacb9473f0cd" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%206.png"><img style="width:1451.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%206.png"/></a></figure><p id="24ce65bc-2ec5-8135-a00f-ce091afc20d7" class=""><strong>Install AWS cli for MAC users</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-812a-bcfc-d67b4c5db823" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac Teddy-files % brew update
teddyyekyawthu@mac Teddy-files % brew install awscli
teddyyekyawthu@mac Teddy-files % aws --version
aws-cli/2.22.28 Python/3.12.6 Darwin/24.6.0 exe/x86_64</code></pre><p id="24ce65bc-2ec5-81bd-bd73-e1dff4eb6133" class=""><div class="indented"><p id="24ce65bc-2ec5-81c1-92b0-efcf5d997838" class="">create aws configure in PC (to bind to create/use/deploy for Kubernetes cluster by using eksctl with created profile which is to authenticate with own AWS CLI)</p></div></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8166-9f34-e7f53fe5bd71" class="code code-wrap"><code class="language-SQL" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac Teddy-files % aws configure

AWS Access Key ID [None]: &lt;your-access-key-id&gt;
AWS Secret Access Key [None]: &lt;your-secret-access-key&gt;
Default region name [None]: ap-southeast-1   # Singapore example
Default output format [None]: json           # or table / text


teddyyekyawthu@mac .aws % cd ~/.aws
teddyyekyawthu@mac .aws % ls -al
total 16
drwxr-xr-x@  4 teddyyekyawthu  staff   128 Jul 10 22:31 .
drwxr-xr-x+ 71 teddyyekyawthu  staff  2272 Aug 10 10:42 ..
-rw-------@  1 teddyyekyawthu  staff   188 Aug  8 11:03 config
-rw-------@  1 teddyyekyawthu  staff   375 Aug  8 11:03 credentials

teddyyekyawthu@mac .aws % cat config

[profile teddy-kube]
region = ap-southeast-1
output = json

teddyyekyawthu@mac .aws % cat credentials

[teddy-kube]
aws_access_key_id = AKIxxxxxxxxxBHP
aws_secret_access_key = PVGxxxxxxxxxQAcxxxxxx4zkyszt</code></pre><p id="24ce65bc-2ec5-81ad-8794-f7dcbc8f4e40" class="">
</p><p id="24ce65bc-2ec5-8121-a242-f4334506bfcf" class=""><strong>install eksctl for Mac </strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81b1-b4b9-fc9512ea67b9" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac Teddy-files % brew tap aws/tap
teddyyekyawthu@mac Teddy-files % brew install eksctl
teddyyekyawthu@mac Teddy-files % eksctl version  
0.212.0-dev+db83da480.2025-07-29T20:05:26Z</code></pre><p id="24ce65bc-2ec5-8110-8951-d61b21a2e7da" class=""><strong>terraform HCL version </strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8120-a692-e7a48f74b275" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac Teddy-files % terraform version
Terraform v1.12.2
on darwin_arm64


# Earlier my one was plugged-in with asdf shell so that even I downloaded by using brew , but still showing 1.10.5

# teddyyekyawthu@mac Teddy-files % terraform version
# Terraform v1.10.5
# on darwin_arm64

# Your version of Terraform is out of date! The latest version
# is 1.12.2. You can update by downloading from https://www.terraform.io/downloads.html
# teddyyekyawthu@mac Teddy-files % which terraform

# /Users/teddyyekyawthu/.asdf/shims/terraform
# teddyyekyawthu@mac Teddy-files % /usr/local/bin/terraform   # old version

# zsh: no such file or directory: /usr/local/bin/terraform
# teddyyekyawthu@mac Teddy-files % which terraform

# /Users/teddyyekyawthu/.asdf/shims/terraform

# teddyyekyawthu@mac Teddy-files % echo &#x27;export PATH=&quot;/opt/homebrew/bin:$PATH&quot;&#x27; &gt;&gt; ~/.zshrc
# source ~/.zshrc
# hash -r
# teddyyekyawthu@mac Teddy-files % asdf plugin remove terraform
# hash -r
# teddyyekyawthu@mac Teddy-files % which -a terraform
# /opt/homebrew/bin/terraform
# /opt/homebrew/bin/terraform
# /opt/homebrew/bin/terraform
# /opt/homebrew/bin/terraform</code></pre><p id="24ce65bc-2ec5-8198-aa36-eeaf652c7730" class="">
</p><h2 id="24ce65bc-2ec5-81e9-86ea-d138a2b562ea" class="">Infrastructure readiness by using terraform (for Jenkins, Sonarcube, Docker, Trivy etc)</h2><p id="24ce65bc-2ec5-819c-8646-cc2cb618940d" class="">Write Terraform code ( <a href="http://provider.tf">provider.tf</a>)</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-811a-b1fb-fbf370d16001" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">terraform {
  required_providers {
    aws = {
      source  = &quot;hashicorp/aws&quot;
      version = &quot;~&gt; 5.0&quot;
    }
  }
}

# Configure the AWS Provider
provider &quot;aws&quot; {
  region  = &quot;ap-southeast-1&quot; #change region as per you requirement
  profile = &quot;teddy-kube&quot; #add your cli profile *** important
}</code></pre><p id="24ce65bc-2ec5-811e-9d91-ce8d7ec729b7" class="">Write Terraform code ( <a href="http://main.tf">main.tf</a> )</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-813b-9b9a-da57a341b7cc" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">resource &quot;aws_instance&quot; &quot;web&quot; {
  ami                    = &quot;ami-06c4be2792f419b7b&quot; #change ami id for different region -&gt; this is ap-southeast-1 region
  instance_type          = &quot;t2.large&quot; #recommanded to use
  key_name               = &quot;cicd&quot; #change keypair name as per your setup in AWS
  vpc_security_group_ids = [aws_security_group.Jenkins-VM-SG.id]
  subnet_id              = &quot;subnet-0d01d8b3e2f5bf885&quot; #change ur subnet id
  user_data = templatefile(&quot;./install.sh&quot;, {})

  tags = {
    Name = &quot;Jenkins-SonarQube&quot; #any name you can given
  }

  root_block_device {
    volume_size = 40
  }
}

resource &quot;aws_security_group&quot; &quot;Jenkins-VM-SG&quot; {
  name        = &quot;Jenkins-VM-SG&quot;
  description = &quot;Allow TLS inbound traffic&quot;
  vpc_id      = &quot;vpc-00d7e4891080b872f&quot; ###change vpc id

  ingress = [
    for port in [22, 80, 443, 8080, 9000, 3000] : {
      description      = &quot;inbound rules&quot;
      from_port        = port
      to_port          = port
      protocol         = &quot;tcp&quot;
      cidr_blocks      = [&quot;0.0.0.0/0&quot;]
      ipv6_cidr_blocks = []
      prefix_list_ids  = []
      security_groups  = []
      self             = false
    }
  ]

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  tags = {
    Name = &quot;Jenkins-VM-SG&quot;
  }
}

</code></pre><p id="24ce65bc-2ec5-81f4-905b-fd777a3f3744" class="">original file from KO Hlaing</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8125-b7b8-d8af25345652" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">resource &quot;aws_instance&quot; &quot;web&quot; {
  ami                    = &quot;ami-06c4be2792f419b7b&quot; # Update AMI ID for your region
  instance_type          = &quot;t2.large&quot;
  key_name               = &quot;keypair&quot; # Update key name
  vpc_security_group_ids = [aws_security_group.Jenkins-VM-SG.id]
  user_data              = templatefile(&quot;./install.sh&quot;, {})

  tags = {
    Name = &quot;Jenkins-SonarQube&quot;
  }

  root_block_device {
    volume_size = 25
  }
}

resource &quot;aws_security_group&quot; &quot;Jenkins-VM-SG&quot; {
  name        = &quot;Jenkins-VM-SG&quot;
  description = &quot;Allow TLS inbound traffic&quot;
  vpc_id      = &quot;vpc-0d5b095006ca56d4f&quot; # Update VPC ID

  ingress = [
    for port in [22, 80, 443, 8080, 9000, 3000] : {
      description      = &quot;inbound rules&quot;
      from_port        = port
      to_port          = port
      protocol         = &quot;tcp&quot;
      cidr_blocks      = [&quot;0.0.0.0/0&quot;]
      ipv6_cidr_blocks = []
      prefix_list_ids  = []
      security_groups  = []
      self             = false
    }
  ]

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  tags = {
    Name = &quot;Jenkins-VM-SG&quot;
  }
}</code></pre><p id="24ce65bc-2ec5-8182-83b3-fc39a3905a7c" class="">
</p><p id="24ce65bc-2ec5-81ee-a3c7-fdd3f2adbf62" class="">
</p><p id="24ce65bc-2ec5-81f0-a40c-da8f1bc901a0" class="">bash for installation  (./ <a href="http://install.sh">install.sh</a>)  </p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-818f-a3b9-da390717ff19" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">#!/bin/bash
sudo apt update -y
wget -O - https://packages.adoptium.net/artifactory/api/gpg/key/public | tee /etc/apt/keyrings/adoptium.asc
echo &quot;deb [signed-by=/etc/apt/keyrings/adoptium.asc] https://packages.adoptium.net/artifactory/deb $(awk -F= &#x27;/^VERSION_CODENAME/{print$2}&#x27; /etc/os-release) main&quot; | tee /etc/apt/sources.list.d/adoptium.list
sudo apt update -y
sudo apt install temurin-21-jdk -y
/usr/bin/java --version
curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc &gt; /dev/null
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list &gt; /dev/null
sudo apt-get update -y
sudo apt-get install jenkins -y
sudo systemctl start jenkins
sudo systemctl status jenkins

# Install Docker and Run SonarQube as Container
sudo apt-get update
sudo apt-get install docker.io -y
sudo usermod -aG docker ubuntu
sudo usermod -aG docker jenkins
newgrp docker
sudo chmod 777 /var/run/docker.sock
docker run -d --name sonar -p 9000:9000 --restart unless-stopped sonarqube:lts-community

# Install Trivy
sudo apt-get install wget apt-transport-https gnupg lsb-release -y
wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | sudo tee /usr/share/keyrings/trivy.gpg &gt; /dev/null
echo &quot;deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main&quot; | sudo tee -a /etc/apt/sources.list.d/trivy.list
sudo apt-get update
sudo apt-get install trivy -y
</code></pre><p id="24ce65bc-2ec5-81a0-9ac8-cbd1ea1b329d" class=""><mark class="highlight-red">Optional if you want to install at Jenkins server for below: you can apply manually inside your server.</mark></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8178-bcf4-ead716d8cee9" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">##install aws cli
curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;
sudo apt install unzip
unzip awscliv2.zip
sudo ./aws/install
aws --version


###eksctl
curl --silent --location &quot;https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz&quot; | tar xz -C /tmp
cd /tmp
sudo mv /tmp/eksctl /bin
eksctl version

##install kubectl
sudo apt update -y
sudo apt install curl -y
curl -LO https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl 
kubectl version --client</code></pre><p id="24ce65bc-2ec5-812b-9511-eb75099e3697" class="">
</p><p id="24ce65bc-2ec5-81e8-9e90-ce2363366c14" class="">after that , Go to the desire path (directory) to deploy with terraform (automation)</p><p id="24ce65bc-2ec5-81d5-ae4e-f6e6bf1ccba8" class=""><code>/Users/teddyyekyawthu/Teddy-files/Netflix-clone-bubududu/Deploy-Netflix-Clone-on-Kubernetes/terraform-jenkins </code></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81bf-9160-d6f166163548" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac terraform-jenkins % terraform init
teddyyekyawthu@mac terraform-jenkins % terraform fmt
teddyyekyawthu@mac terraform-jenkins % terraform validate
teddyyekyawthu@mac terraform-jenkins % terraform plan

teddyyekyawthu@mac terraform-jenkins % terraform plan                
aws_security_group.Jenkins-VM-SG: Refreshing state... [id=sg-0f1bfed39db942ac0]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated
with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_instance.web will be created
  + resource &quot;aws_instance&quot; &quot;web&quot; {
      + ami                                  = &quot;ami-06c4be2792f419b7b&quot;
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + disable_api_stop                     = (known after apply)
      + disable_api_termination              = (known after apply)
      + ebs_optimized                        = (known after apply)
      + enable_primary_ipv6                  = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + host_resource_group_arn              = (known after apply)
      + iam_instance_profile                 = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_lifecycle                   = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = &quot;t2.large&quot;
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = &quot;cicd&quot;
      + monitoring                           = (known after apply)
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + placement_partition_number           = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + spot_instance_request_id             = (known after apply)
      + subnet_id                            = &quot;subnet-0d01d8b3e2f5bf885&quot;
      + tags                                 = {
          + &quot;Name&quot; = &quot;Jenkins-SonarQube&quot;
        }
      + tags_all                             = {
          + &quot;Name&quot; = &quot;Jenkins-SonarQube&quot;
        }
      + tenancy                              = (known after apply)
      + user_data                            = &quot;42caed7d96911f34b2ce87368273c798f00234f2&quot;
      + user_data_base64                     = (known after apply)
      + user_data_replace_on_change          = false
      + vpc_security_group_ids               = [
          + &quot;sg-0f1bfed39db942ac0&quot;,
        ]

      + capacity_reservation_specification (known after apply)

      + cpu_options (known after apply)

      + ebs_block_device (known after apply)

      + enclave_options (known after apply)

      + ephemeral_block_device (known after apply)

      + instance_market_options (known after apply)

      + maintenance_options (known after apply)

      + metadata_options (known after apply)

      + network_interface (known after apply)

      + private_dns_name_options (known after apply)

      + root_block_device {
          + delete_on_termination = true
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags_all              = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = 40
          + volume_type           = (known after apply)
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.

teddyyekyawthu@mac terraform-jenkins % terraform apply --auto-approve
aws_security_group.Jenkins-VM-SG: Refreshing state... [id=sg-0f1bfed39db942ac0]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated
with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_instance.web will be created
  + resource &quot;aws_instance&quot; &quot;web&quot; {
      + ami                                  = &quot;ami-06c4be2792f419b7b&quot;
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + disable_api_stop                     = (known after apply)
      + disable_api_termination              = (known after apply)
      + ebs_optimized                        = (known after apply)
      + enable_primary_ipv6                  = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + host_resource_group_arn              = (known after apply)
      + iam_instance_profile                 = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_lifecycle                   = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = &quot;t2.large&quot;
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = &quot;cicd&quot;
      + monitoring                           = (known after apply)
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + placement_partition_number           = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + spot_instance_request_id             = (known after apply)
      + subnet_id                            = &quot;subnet-0d01d8b3e2f5bf885&quot;
      + tags                                 = {
          + &quot;Name&quot; = &quot;Jenkins-SonarQube&quot;
        }
      + tags_all                             = {
          + &quot;Name&quot; = &quot;Jenkins-SonarQube&quot;
        }
      + tenancy                              = (known after apply)
      + user_data                            = &quot;42caed7d96911f34b2ce87368273c798f00234f2&quot;
      + user_data_base64                     = (known after apply)
      + user_data_replace_on_change          = false
      + vpc_security_group_ids               = [
          + &quot;sg-0f1bfed39db942ac0&quot;,
        ]

      + capacity_reservation_specification (known after apply)

      + cpu_options (known after apply)

      + ebs_block_device (known after apply)

      + enclave_options (known after apply)

      + ephemeral_block_device (known after apply)

      + instance_market_options (known after apply)

      + maintenance_options (known after apply)

      + metadata_options (known after apply)

      + network_interface (known after apply)

      + private_dns_name_options (known after apply)

      + root_block_device {
          + delete_on_termination = true
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags_all              = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = 40
          + volume_type           = (known after apply)
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.
aws_instance.web: Creating...
aws_instance.web: Still creating... [10s elapsed]
aws_instance.web: Creation complete after 13s [id=i-0409e8c0f63924319]

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</code></pre><p id="24ce65bc-2ec5-8170-ac0c-ecc68f5f83de" class="">
</p><p id="24ce65bc-2ec5-81b2-b82d-dde6708e6596" class="">then, we can go to check and see in our AWS → EC2 instance</p><figure id="24ce65bc-2ec5-81e8-8357-c02e9f385633" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%207.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%207.png"/></a></figure><p id="24ce65bc-2ec5-8103-8b69-c7b602abe3ba" class="">you can login two ways as below: Option 1 (from aws) , Option 2 ( by using .pem key-pair to access)</p><p id="24ce65bc-2ec5-8172-83b6-c31d2fc8c989" class="">Option 1:</p><figure id="24ce65bc-2ec5-81e4-947b-c90029626763" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%208.png"><img style="width:1451.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%208.png"/></a></figure><p id="24ce65bc-2ec5-8188-b9c7-d5a1eb0f92ce" class="">
</p><p id="24ce65bc-2ec5-8111-b755-ea6eed1cbbe5" class=""><code>systemctl status jenkins</code></p><p id="24ce65bc-2ec5-8173-b61b-c619442fa4ed" class=""><code>ubuntu@ip-10-0-0-5:~$ aws --version</code></p><p id="24ce65bc-2ec5-81c7-81e4-e5b54404c6c9" class=""><code>trivy version</code></p><p id="24ce65bc-2ec5-8179-b6ba-cce85ce4bd13" class=""><code>eksctl version</code></p><p id="24ce65bc-2ec5-8112-9b28-f123f75a7283" class=""><code>docker version</code></p><p id="24ce65bc-2ec5-816b-96ea-f78cb3e901de" class=""><code>docker ps</code></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81d3-972f-f8b368b1faa0" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">Welcome to Ubuntu 22.04.4 LTS (GNU/Linux 6.5.0-1014-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

  System information as of Mon Aug 11 00:59:05 UTC 2025

  System load:  0.0                Processes:                119
  Usage of /:   27.3% of 38.58GB   Users logged in:          0
  Memory usage: 46%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                 IPv4 address for eth0:    10.0.0.5

 * Ubuntu Pro delivers the most comprehensive open source security and
   compliance features.

   https://ubuntu.com/aws/pro

Expanded Security Maintenance for Applications is not enabled.

69 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm

New release &#x27;24.04.3 LTS&#x27; available.
Run &#x27;do-release-upgrade&#x27; to upgrade to it.


*** System restart required ***
Last login: Sun Aug 10 15:31:26 2025 from 3.0.5.37
ubuntu@ip-10-0-0-5:~$ systemctl status jenkins
● jenkins.service - Jenkins Continuous Integration Server
     Loaded: loaded (/lib/systemd/system/jenkins.service; enabled; vendor preset: enabled)
     Active: active (running) since Sat 2025-08-09 05:35:41 UTC; 1 day 19h ago
   Main PID: 6067 (java)
      Tasks: 67 (limit: 9498)
     Memory: 1.2G
        CPU: 2h 10min 46.139s
     CGroup: /system.slice/jenkins.service
             ├─  6067 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/java/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080
             ├─117871 /usr/sbin/ &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;
             └─117872 /usr/sbin/ &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;

Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at PluginClassLoader for kubernetes-credentials-provider//com.cloudbees.jenkins.plugins.kubernetes_credentials_provider.KubernetesCredentialProvider$1.doRun(Ku&gt;
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at hudson.triggers.SafeTimerTask.run(SafeTimerTask.java:92)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at jenkins.security.ImpersonatingScheduledExecutorService$1.run(ImpersonatingScheduledExecutorService.java:67)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]:         at java.base/java.lang.Thread.run(Thread.java:1583)
Aug 11 00:55:55 ip-10-0-0-5 jenkins[6067]: 2025-08-11 00:55:55.340+0000 [id=50]        INFO        c.c.j.p.k.KubernetesCredentialProvider#reconnectLater: Attempting to reco

ubuntu@ip-10-0-0-5:~$ aws --version
aws-cli/2.28.6 Python/3.13.4 Linux/6.5.0-1014-aws exe/x86_64.ubuntu.22
ubuntu@ip-10-0-0-5:~$ trivy version
Version: 0.65.0
ubuntu@ip-10-0-0-5:~$ eksctl version
0.212.0nnect Kubernetes client in 5 mins

ubuntu@ip-10-0-0-5:~$ docker version
Client:
 Version:           27.5.1
 API version:       1.47
 Go version:        go1.22.2
 Git commit:        27.5.1-0ubuntu3~22.04.2
 Built:             Mon Jun  2 12:18:38 2025
 OS/Arch:           linux/amd64
 Context:           default

Server:
 Engine:
  Version:          27.5.1
  API version:      1.47 (minimum version 1.24)
  Go version:       go1.22.2
  Git commit:       27.5.1-0ubuntu3~22.04.2
  Built:            Mon Jun  2 12:18:38 2025
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.7.27
  GitCommit:        
 runc:
  Version:          1.2.5-0ubuntu1~22.04.1
  GitCommit:        
 docker-init:
  Version:          0.19.0
  GitCommit:
  
  ubuntu@ip-10-0-0-5:~$ docker ps
CONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS        PORTS                                       NAMES
8c50e65fcd85   sonarqube:lts-community   &quot;/opt/sonarqube/dock…&quot;   43 hours ago   Up 43 hours   0.0.0.0:9000-&gt;9000/tcp, :::9000-&gt;9000/tcp   sonar        </code></pre><p id="24ce65bc-2ec5-81cd-8487-d785b7e0739b" class="">
</p><p id="24ce65bc-2ec5-81dd-9f7e-f8c03c9ec056" class="">Option 2: (From our PC by using ssh with key-pairs)</p><p id="24ce65bc-2ec5-81ca-9019-de579275f30f" class="">my key-pair “.pem” is situated in Downloads file, so needs to go that path</p><p id="24ce65bc-2ec5-81d9-a54b-e3f9ab906b3f" class="">teddyyekyawthu@mac Downloads % <code>ssh -i cicd.pem </code><code><a href="mailto:ubuntu@47.129.7.56">ubuntu@47.129.7.56</a></code></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8152-a505-d96618619ef3" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">ubuntu@ip-10-0-0-5:~$ Read from remote host 47.129.7.56: Connection reset by peer
Connection to 47.129.7.56 closed.
client_loop: send disconnect: Broken pipe
teddyyekyawthu@mac Downloads % ssh -i cicd.pem ubuntu@47.129.7.56
Welcome to Ubuntu 22.04.4 LTS (GNU/Linux 6.5.0-1014-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

  System information as of Mon Aug 11 01:10:16 UTC 2025

  System load:  0.00390625         Processes:                121
  Usage of /:   27.3% of 38.58GB   Users logged in:          1
  Memory usage: 46%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                 IPv4 address for eth0:    10.0.0.5

 * Ubuntu Pro delivers the most comprehensive open source security and
   compliance features.

   https://ubuntu.com/aws/pro

Expanded Security Maintenance for Applications is not enabled.

69 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm

New release &#x27;24.04.3 LTS&#x27; available.
Run &#x27;do-release-upgrade&#x27; to upgrade to it.


*** System restart required ***
Last login: Mon Aug 11 00:59:06 2025 from 3.0.5.36
ubuntu@ip-10-0-0-5:~$ </code></pre><p id="24ce65bc-2ec5-8153-9a46-fe55e8bf631e" class="">
</p><p id="24ce65bc-2ec5-810e-b439-fff88fb8d22a" class="">Access test to Jenkins &amp; SonarQube from web-page</p><p id="24ce65bc-2ec5-8100-9dea-e29347ea4f0b" class=""><a href="http://47.129.7.56:8080/manage/configure">http://47.129.7.56:8080/</a> <code>(IP will be changed according to our public IP)</code></p><p id="24ce65bc-2ec5-81ac-93df-de98d93e03c5" class=""><a href="http://47.129.7.56:9000/">http://47.129.7.56:9000/</a> <code>(IP will be changed according to our public IP)</code></p><p id="24ce65bc-2ec5-81f4-b509-ed96d9634c9b" class="">
</p><p id="24ce65bc-2ec5-8108-b498-f17eca10e769" class=""><a href="http://47.129.7.56:8080/manage/configure">http://47.129.7.56:8080/</a> (Jenkins web)</p><figure id="24ce65bc-2ec5-812b-902f-f3477d839013" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%209.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%209.png"/></a></figure><p id="24ce65bc-2ec5-8165-a9c6-ff230a8cec1e" class="">then - default page is there - need to copy this path and find the password from our Jenkins EC2 server</p><p id="24ce65bc-2ec5-8125-88c1-dc1c7dec172a" class=""><mark class="highlight-teal"><mark class="highlight-teal_background"><code>/var/lib/jenkins/secrets/initialAdminPassword</code></mark></mark></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81f3-b764-fb53df599b1c" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">ubuntu@ip-10-0-0-5:~$ sudo cat /var/lib/jenkins/secrets/initialAdminPassword
e3723da9d8cb49ddac260181b46620d7</code></pre><p id="24ce65bc-2ec5-814c-a683-ff10e65d2375" class="">
</p><p id="24ce65bc-2ec5-812e-beb0-c5dac6c5387c" class=""><strong>Jenkins Setup</strong></p><ol type="1" id="24ce65bc-2ec5-81e9-b651-df6ec9f7b41a" class="numbered-list" start="1"><li>Access Jenkins at <code>http://&lt;public-ip&gt;:8080</code> and install suggested plugins.</li></ol><ol type="1" id="24ce65bc-2ec5-81a3-b312-df819d5bfebc" class="numbered-list" start="2"><li>Install the following Jenkins plugins:<ul id="24ce65bc-2ec5-8125-9e35-c3325c2d71ca" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Eclipse Temurin installer</code></mark></li></ul><ul id="24ce65bc-2ec5-81fb-a37e-d72f94d57ddc" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>SonarQube Scanner</code></mark></li></ul><ul id="24ce65bc-2ec5-8134-9229-ddd4facd5fcf" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Sonar Quality Gates</code></mark></li></ul><ul id="24ce65bc-2ec5-81d4-994c-f47c8e25cffc" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>NodeJS</code></mark></li></ul><ul id="24ce65bc-2ec5-81c5-97b0-fc8ea018285c" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Docker, Docker Commons, Docker Pipeline, Docker API</code></mark></li></ul><ul id="24ce65bc-2ec5-8189-8ff0-d11c04b1eedf" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Kubernetes, Kubernetes Credentials, Kubernetes Client API, Kubernetes CLI</code></mark></li></ul><ul id="24ce65bc-2ec5-81e7-98c1-d04aae818cec" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Pipeline: Stage View</code></mark></li></ul><ul id="24ce65bc-2ec5-816f-8652-c21df071d105" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Blue Ocean</code></mark></li></ul><ul id="24ce65bc-2ec5-819a-bfa2-c00d7a9039ba" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>AWS Credentials</code></mark></li></ul><ul id="24ce65bc-2ec5-81c6-ac6c-f41daf4040e2" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>Prometheus metrics</code></mark></li></ul><ul id="24ce65bc-2ec5-811e-ae94-f715c684daf7" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal"><code>OWASP Dependency-Check</code></mark></li></ul><p id="24ce65bc-2ec5-8166-8916-df9de3ba60c4" class="">install plug-in sample </p><figure id="24ce65bc-2ec5-819c-a44d-c35b0c1ad4b0" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2010.png"><img style="width:1399.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2010.png"/></a></figure><p id="24ce65bc-2ec5-8123-8072-cf0582749199" class="">
</p><p id="24ce65bc-2ec5-8124-9c34-d0882d530384" class="">Obtain an NVD API Key</p><ul id="24ce65bc-2ec5-81fc-8da1-e3a6b6497701" class="bulleted-list"><li style="list-style-type:disc"><strong>Request an API Key</strong>:<ul id="24ce65bc-2ec5-81ad-99af-c311934f0c66" class="bulleted-list"><li style="list-style-type:circle">Go to the <a href="https://nvd.nist.gov/developers/request-an-api-key">NVD API Key Request Page</a>.</li></ul><ul id="24ce65bc-2ec5-8135-9222-f0cacdac5292" class="bulleted-list"><li style="list-style-type:circle">Fill out the form with your details (e.g., name, email, organization).</li></ul><ul id="24ce65bc-2ec5-8198-8482-df869753831a" class="bulleted-list"><li style="list-style-type:circle">You’ll receive an API key via email (usually within minutes).</li></ul></li></ul><ul id="24ce65bc-2ec5-8182-be3e-f611cbff36a1" class="bulleted-list"><li style="list-style-type:disc"><strong>Add API Key to Jenkins</strong>:<ul id="24ce65bc-2ec5-81bf-9d92-d9efd49d394e" class="bulleted-list"><li style="list-style-type:circle">In Jenkins, go to <strong>Manage Jenkins &gt; Manage Plugins &gt; Credentials &gt; System &gt; Global Credentials</strong></li></ul><figure id="24ce65bc-2ec5-8153-9620-ef625d5e6c12" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2011.png"><img style="width:1371.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2011.png"/></a></figure><ul id="24ce65bc-2ec5-81ff-b2e1-eae3145c9a70" class="bulleted-list"><li style="list-style-type:circle">Click <strong>Add Credentials</strong>.</li></ul><ul id="24ce65bc-2ec5-8148-aee5-d9a8520098cf" class="bulleted-list"><li style="list-style-type:circle">Set:<ul id="24ce65bc-2ec5-811f-bfff-fd9a7907ee17" class="bulleted-list"><li style="list-style-type:square"><strong>Kind</strong>: Secret text</li></ul><ul id="24ce65bc-2ec5-81f9-8cd2-efe165971b3d" class="bulleted-list"><li style="list-style-type:square"><strong>Secret</strong>: Paste the NVD API key</li></ul><ul id="24ce65bc-2ec5-815a-bb5d-d81aaf20bf93" class="bulleted-list"><li style="list-style-type:square"><strong>ID</strong>: nvd-api-key</li></ul><ul id="24ce65bc-2ec5-8120-be55-c156c6798e8e" class="bulleted-list"><li style="list-style-type:square"><strong>Description</strong>: NVD API Key for Dependency-Check</li></ul></li></ul><ul id="24ce65bc-2ec5-815a-9109-dacca3199c96" class="bulleted-list"><li style="list-style-type:circle">Save the credential.</li></ul><p id="24ce65bc-2ec5-81c0-869f-d625a6aae3b2" class="">before configuring tools , need to check with below Jenkins (Can be referred the video CICD Pipeline with Jenkins)</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81c1-8727-cc7df84a93e2" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">pipeline {
    agent any
    
    parameters {
        string(name: &#x27;MAJOR_VERSION&#x27;, defaultValue: &#x27;1&#x27;, description: &#x27;Major version for the Docker image tag (e.g., 1 for v1.x)&#x27;)
    }
    
    tools {
        jdk &#x27;jdk21&#x27;
        nodejs &#x27;node20&#x27;
    }
    
    environment {
        SCANNER_HOME = tool &#x27;sonarqube-scanner&#x27;
        TRIVY_HOME = &#x27;/usr/bin&#x27;
        REPO_URL = &#x27;https://github.com/TEDDY201289/Netflix-test.git&#x27;
        REPO_BRANCH = &#x27;main&#x27;
        DOCKER_IMAGE_NAME = &#x27;teddy2012/netflix-bubudu&#x27;
        SONAR_PROJECT_NAME = &#x27;Netflix&#x27;
        SONAR_PROJECT_KEY = &#x27;Netflix&#x27;
        DOCKER_CREDENTIALS_ID = &#x27;dockerhub&#x27;
        SONAR_CREDENTIALS_ID = &#x27;SonarQube-Token&#x27;
        KUBERNETES_CREDENTIALS_ID = &#x27;kubernetes&#x27;
        SONAR_SERVER = &#x27;SonarQube-Server&#x27;
        DOCKER_TOOL_NAME = &#x27;docker&#x27;
        TRIVY_FS_REPORT = &#x27;trivyfs.txt&#x27;
        TRIVY_IMAGE_REPORT = &#x27;trivyimage.txt&#x27;
        K8S_NAMESPACE = &#x27;default&#x27;
        APP_NAME = &#x27;netflix&#x27;
    }
    
    stages {
        stage(&#x27;Clean Workspace&#x27;) {
            steps {
                cleanWs()
            }
            post {
                always {
                    echo &quot;Workspace cleaned successfully&quot;
                }
            }
        }
        stage(&#x27;Checkout from Git&#x27;) {
            steps {
                git branch: &quot;${REPO_BRANCH}&quot;, url: &quot;${REPO_URL}&quot;, credentialsId: &#x27;github-credentials&#x27;
            }
        }
        stage(&#x27;SonarQube Analysis&#x27;) {
            steps {
                withSonarQubeEnv(credentialsId: &quot;${SONAR_CREDENTIALS_ID}&quot;, installationName: &quot;${SONAR_SERVER}&quot;) {
                    sh &quot;&quot;&quot;
                    ${SCANNER_HOME}/bin/sonar-scanner \
                        -Dsonar.projectName=${SONAR_PROJECT_NAME} \
                        -Dsonar.projectKey=${SONAR_PROJECT_KEY}
                    &quot;&quot;&quot;
                }
            }
        }
        stage(&#x27;Quality Gate&#x27;) {
            steps {
                script {
                    waitForQualityGate abortPipeline: false, credentialsId: &quot;${SONAR_CREDENTIALS_ID}&quot;
                }
            }
        }
        stage(&#x27;Install Dependencies&#x27;) {
            steps {
                script {
                    def nodeHome = tool name: &#x27;node20&#x27;, type: &#x27;nodejs&#x27;
                    env.PATH = &quot;${nodeHome}/bin:${env.PATH}&quot;
                    sh &quot;node --version&quot;
                    sh &quot;npm --version&quot;
                    sh &quot;npm install&quot;
                }
            }
            post {
                failure {
                    echo &quot;Failed to install dependencies. Check Node.js setup or package.json.&quot;
                }
            }
        }
        // stage(&#x27;OWASP Dependency Check&#x27;) {
        //     steps {
        //         withCredentials([string(credentialsId: &#x27;nvd-api-key&#x27;, variable: &#x27;NVD_API_KEY&#x27;)]) {
        //             dependencyCheck additionalArguments: &quot;--scan ./ --disableYarnAudit --disableNodeAudit --nvdApiKey ${NVD_API_KEY}&quot;, odcInstallation: &#x27;DP-Check&#x27;
        //             dependencyCheckPublisher pattern: &#x27;**/dependency-check-report.xml&#x27;
        //         }
        //     }
        // }
        stage(&#x27;Trivy FS Scan&#x27;) {
            steps {
                script {
                    sh &quot;${TRIVY_HOME}/trivy fs . &gt; ${TRIVY_FS_REPORT}&quot;
                }
            }
            post {
                always {
                    archiveArtifacts artifacts: &quot;${TRIVY_FS_REPORT}&quot;, allowEmptyArchive: true
                }
            }
        }
        stage(&#x27;Set Version&#x27;) {
            steps {
                script {
                    def buildNumber = env.BUILD_NUMBER ?: &#x27;0&#x27;
                    env.IMAGE_TAG = &quot;v${params.MAJOR_VERSION}.${buildNumber}&quot;
                    echo &quot;Docker image will be tagged as: ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                }
            }
        }
        stage(&#x27;Docker Build &amp; Push&#x27;) {
            steps {
                withCredentials([string(credentialsId: &#x27;tmdb-api-key&#x27;, variable: &#x27;TMDB_API_KEY&#x27;)]) {
                    script {
                        withDockerRegistry(credentialsId: &quot;${DOCKER_CREDENTIALS_ID}&quot;, toolName: &quot;${DOCKER_TOOL_NAME}&quot;) {
                            sh &quot;docker build -t ${APP_NAME} --build-arg TMDB_V3_API_KEY=${TMDB_API_KEY} .&quot;
                            sh &quot;docker tag ${APP_NAME} ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                            sh &quot;docker push ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                        }
                    }
                }
            }
            post {
                always {
                    sh &quot;docker rmi ${APP_NAME} ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG} || true&quot;
                }
            }
        }
        stage(&#x27;Trivy Image Scan&#x27;) {
            steps {
                script {
                    sh &quot;${TRIVY_HOME}/trivy image ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG} &gt; ${TRIVY_IMAGE_REPORT}&quot;
                }
            }
            post {
                always {
                    archiveArtifacts artifacts: &quot;${TRIVY_IMAGE_REPORT}&quot;, allowEmptyArchive: true
                }
            }
        }
        stage(&#x27;Deploy to Kubernetes&#x27;) {
            steps {
                withCredentials([[
                    $class: &#x27;AmazonWebServicesCredentialsBinding&#x27;,
                    credentialsId: &#x27;aws-secret&#x27;
                ]]) {
                    script {
                        dir(&#x27;Kubernetes&#x27;) {
                            withKubeConfig(
                                credentialsId: &quot;${KUBERNETES_CREDENTIALS_ID}&quot;,
                                serverUrl: &#x27;https://ABCD027AC4657D748C746D37AC3C7DFE.gr7.ap-southeast-1.eks.amazonaws.com&#x27;, // Replace with actual EKS endpoint
                                namespace: &quot;${K8S_NAMESPACE}&quot;
                            ) {
                                sh &#x27;kubectl version&#x27;
                                sh &quot;sed -i &#x27;s|image: ${DOCKER_IMAGE_NAME}:.*|image: ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}|&#x27; deployment.yml&quot;
                                sh &#x27;kubectl apply -f deployment.yml&#x27;
                                sh &#x27;kubectl apply -f service.yml&#x27;
                            }
                        }
                    }
                }
            }
        }
    }
    post {
        always {
            emailext attachLog: true,
                subject: &quot;&#x27;${currentBuild.result}&#x27;&quot;,
                body: &quot;Project: ${env.JOB_NAME}&lt;br/&gt;&quot; +
                      &quot;Build Number: ${env.BUILD_NUMBER}&lt;br/&gt;&quot; +
                      &quot;URL: ${env.BUILD_URL}&lt;br/&gt;&quot;,
                to: &#x27;hlaingminpaing.ygn@gmail.com&#x27;, // Update with your email
                attachmentsPattern: &#x27;trivyfs.txt,trivyimage.txt&#x27;
        }
    }
}</code></pre></li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-81ac-9a90-c5a9b15938d1" class="numbered-list" start="3"><li>Configure tools in Jenkins:<p id="24ce65bc-2ec5-8176-802b-eb7afd54d41b" class="">sample screenshots:</p><p id="24ce65bc-2ec5-81d8-baeb-d41e8c04a1b5" class="">
</p><figure id="24ce65bc-2ec5-818b-b6bc-d66f1a8f961a" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2012.png"><img style="width:1403.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2012.png"/></a></figure><ul id="24ce65bc-2ec5-8139-93ba-ec0ecafa52cf" class="bulleted-list"><li style="list-style-type:disc"><strong>NodeJS</strong>: Add NodeJS 20 installation (<code>node20</code>).</li></ul><ul id="24ce65bc-2ec5-8156-8d8f-c6b26c4a654d" class="bulleted-list"><li style="list-style-type:disc"><strong>JDK</strong>: Add JDK 21 installation (<code>jdk21</code>).</li></ul><ul id="24ce65bc-2ec5-813d-a051-dde0055d4ccd" class="bulleted-list"><li style="list-style-type:disc"><strong>Docker</strong>: Configure Docker installation (<code>docker</code>).</li></ul><ul id="24ce65bc-2ec5-8136-968b-d3f96c6bf57d" class="bulleted-list"><li style="list-style-type:disc"><strong>SonarQube Scanner</strong>: Add SonarQube Scanner installation (<code>sonarqube-scanner</code>).</li></ul><ul id="24ce65bc-2ec5-812b-ac41-e8a267c808bc" class="bulleted-list"><li style="list-style-type:disc"><strong>Dependency-Check</strong>: Add Dependency-Check installation (<code>DP-Check</code>), install automatically from GitHub.</li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-8183-9a81-c3808d9f88da" class="numbered-list" start="4"><li>Generate a SonarQube token:<ul id="24ce65bc-2ec5-81ad-bfff-e6276be29eaf" class="bulleted-list"><li style="list-style-type:disc">Log in to SonarQube at <code>http://&lt;public-ip&gt;:9000</code>.</li></ul><ul id="24ce65bc-2ec5-819a-b432-fcce7e5002e4" class="bulleted-list"><li style="list-style-type:disc">Navigate to <strong>User &gt; My Account &gt; Security &gt; Generate Tokens</strong>.</li></ul><ul id="24ce65bc-2ec5-81db-b397-c803d8b698fa" class="bulleted-list"><li style="list-style-type:disc">Copy the token and add it as a secret in Jenkins (Credentials ID: <code>SonarQube-Token</code>).</li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-81a6-b2ea-ccacfd0e1e9b" class="numbered-list" start="5"><li>Add credentials in Jenkins:<ul id="24ce65bc-2ec5-819f-8ee6-c8e9d518eb1a" class="bulleted-list"><li style="list-style-type:disc"><strong>Docker Hub</strong>: Add Docker Hub credentials (Credentials ID: <code>dockerhub</code>).</li></ul><ul id="24ce65bc-2ec5-8157-9803-c82e7f734a49" class="bulleted-list"><li style="list-style-type:disc"><strong>GitHub</strong>: Add GitHub credentials (Credentials ID: <code>github-credentials</code>).</li></ul><ul id="24ce65bc-2ec5-8118-86ca-c9afed100ef8" class="bulleted-list"><li style="list-style-type:disc"><strong>AWS</strong>: Add AWS credentials (Credentials ID: <code>aws-secret</code>).</li></ul><ul id="24ce65bc-2ec5-81f5-8b75-d2d27fa32e6f" class="bulleted-list"><li style="list-style-type:disc"><strong>Kubernetes</strong>: Copy <code>/home/ubuntu/.kube/config</code> and save as a secret (Credentials ID: <code>kubernetes</code>).</li></ul><ul id="24ce65bc-2ec5-810f-8cb0-cbcbb6763279" class="bulleted-list"><li style="list-style-type:disc"><strong>TMDB API Key</strong>: Add the TMDB API key as a secret text (Credentials ID: <code>tmdb-api-key</code>).</li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-8176-8816-ddda266e6aac" class="numbered-list" start="6"><li>Configure environment variables in Jenkins for SonarQube and Docker.<ul id="24ce65bc-2ec5-81b3-9538-e6c58fa82764" class="bulleted-list"><li style="list-style-type:disc"><strong>SonarQube servers: </strong>SonarQube server configuration (URL: <code>http://&lt;public-ip&gt;:9000</code>, Name: <code>SonarQube-Server</code></li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-81ea-a3e3-d66255006f48" class="numbered-list" start="7"><li>Set up a webhook in SonarQube:<ul id="24ce65bc-2ec5-8176-bdca-dcc21d7a4b8d" class="bulleted-list"><li style="list-style-type:disc">Navigate to <strong>Administration &gt; Configuration &gt; Webhooks</strong>.</li></ul><ul id="24ce65bc-2ec5-819f-9518-cf88778e4b9c" class="bulleted-list"><li style="list-style-type:disc">Add a webhook with the URL: <code>http://&lt;jenkins-public-ip&gt;:8080/sonarqube-webhook/</code>.</li></ul></li></ol><ol type="1" id="24ce65bc-2ec5-81b6-bbd0-e2174f270f86" class="numbered-list" start="8"><li>Create a SonarQube project and quality gate:<ul id="24ce65bc-2ec5-8110-b40b-ceae69253579" class="bulleted-list"><li style="list-style-type:disc">In SonarQube, create a new project (Name: <code>Netflix</code>, Key: <code>Netflix</code>).</li></ul><ul id="24ce65bc-2ec5-812d-8f5e-c7abff14589f" class="bulleted-list"><li style="list-style-type:disc">Configure a quality gate with desired metrics (e.g., code coverage, vulnerabilities).</li></ul></li></ol><p id="24ce65bc-2ec5-81d9-93f2-c804450e4ef7" class=""><div class="indented"><p id="24ce65bc-2ec5-81ce-94ad-dbd33a541907" class=""><code>SonarQube scanner &amp; Sonar Qube</code></p></div></p><figure id="24ce65bc-2ec5-81ea-a406-e75089115876" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2013.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2013.png"/></a></figure><figure id="24ce65bc-2ec5-814d-8f55-e36b91422a71" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2014.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2014.png"/></a></figure><p id="24ce65bc-2ec5-8130-9abd-eb8543a30638" class=""> <div class="indented"><p id="24ce65bc-2ec5-812f-9e5e-cb6ddad83d1b" class=""><code>NodeJS</code></p></div></p><figure id="24ce65bc-2ec5-81d2-adf3-c2ba4959abc2" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2015.png"><img style="width:1452px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2015.png"/></a></figure><p id="24ce65bc-2ec5-81f7-92ba-cd960fae34c2" class=""><div class="indented"><p id="24ce65bc-2ec5-8161-8df8-ec6a278e5eaa" class=""><code>Docker</code></p></div></p><figure id="24ce65bc-2ec5-81cb-8d67-f1fa0d4ee04a" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2016.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2016.png"/></a></figure><p id="24ce65bc-2ec5-817f-901b-dc49a906ef66" class=""><div class="indented"><p id="24ce65bc-2ec5-8109-89cc-fcec9685a72b" class=""><code>Git</code></p></div></p><figure id="24ce65bc-2ec5-810c-932a-f401f407ab1c" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2017.png"><img style="width:1451.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2017.png"/></a></figure><figure id="24ce65bc-2ec5-814c-a488-fe301da256aa" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2018.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2018.png"/></a></figure><p id="24ce65bc-2ec5-8147-a5a7-d8865c10464c" class="">
</p><p id="24ce65bc-2ec5-8129-9df5-f66707f024ea" class="">Add Credentials according to the Jenkins file (Docker, Github, SonarQube-token, Tmdb-api-key, Kubernetes and AWS)</p><figure id="24ce65bc-2ec5-81db-94bd-f4e17fedf289" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2019.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2019.png"/></a></figure><p id="24ce65bc-2ec5-8136-949c-e98c279564d6" class=""><code>sample for docker </code></p><figure id="24ce65bc-2ec5-8182-acb4-cf8feb8234b7" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2020.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2020.png"/></a></figure><p id="24ce65bc-2ec5-81a8-94d1-cac26c8a4f4c" class=""><div class="indented"><figure id="24ce65bc-2ec5-81d1-b5a9-d0b9956c4eae" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2021.png"><img style="width:1399.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2021.png"/></a></figure><p id="24ce65bc-2ec5-813b-9058-ef3408fb7f78" class="">TMTDB (account should be created and go to this setting)</p><p id="24ce65bc-2ec5-810a-bfa4-e69468f162a3" class=""><mark class="highlight-teal"><code><a href="https://www.themoviedb.org/settings/api">https://www.themoviedb.org/settings/api</a></code></mark></p><figure id="24ce65bc-2ec5-81a5-85dd-d0086f9200a6" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2022.png"><img style="width:1399.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2022.png"/></a></figure><p id="24ce65bc-2ec5-81a1-9c14-ff31583717da" class="">
</p></div></p><p id="24ce65bc-2ec5-8132-8ea0-fbddffb02c56" class="">Go to Jenkins &gt;&gt;&gt; Managed Jenkins &gt;&gt;&gt; System <div class="indented"><figure id="24ce65bc-2ec5-81c9-b109-c6ad13004927" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2023.png"><img style="width:1428px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2023.png"/></a></figure><figure id="24ce65bc-2ec5-8192-b977-ec74610f3e27" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2024.png"><img style="width:1428px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2024.png"/></a></figure><p id="24ce65bc-2ec5-8140-8120-f2cc47a1c760" class="">
</p><figure id="24ce65bc-2ec5-818d-b11d-fe3ba4494ba8" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2025.png"><img style="width:1400px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2025.png"/></a></figure><p id="24ce65bc-2ec5-81c0-976c-c3d6f36140d1" class="">
</p><p id="24ce65bc-2ec5-81c4-9264-ef48b09c76df" class="">
</p><p id="24ce65bc-2ec5-81ee-a82f-df9f7804a9b3" class="">
</p></div></p><p id="24ce65bc-2ec5-81e4-b66a-f1343a92503b" class="">Then go to access <code><a href="http://47.129.7.56:9000/admin/webhooks">http://47.129.7.56:9000/admin/webhooks</a></code> (IP will be changed)</p><p id="24ce65bc-2ec5-814c-812a-cee2cd8fd5b1" class="">Default username and password -<code> admin / admin</code></p><figure id="24ce65bc-2ec5-81b7-9eaa-cb365ede9730" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2026.png"><img style="width:1424px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2026.png"/></a></figure><figure id="24ce65bc-2ec5-810a-81b6-ea5563a1514a" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2027.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2027.png"/></a></figure><p id="24ce65bc-2ec5-81f9-9f33-efb11d0f73a5" class="">Create webhook to authenticate with Jenkins </p><figure id="24ce65bc-2ec5-81c2-b214-e2e0fae79432" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2028.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2028.png"/></a></figure><figure id="24ce65bc-2ec5-818a-a444-e8104ef7c0d5" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2029.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2029.png"/></a></figure><p id="24ce65bc-2ec5-81e9-8087-e28ebbde577f" class="">To do Quality gate - Go to Manual code &gt;&gt; Create Project </p><figure id="24ce65bc-2ec5-8121-8349-e135971e0ea1" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2030.png"><img style="width:366px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2030.png"/></a></figure><figure id="24ce65bc-2ec5-81e4-9adc-e32efa43c4f4" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2031.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2031.png"/></a></figure><p id="24ce65bc-2ec5-81b3-a32e-d6334875002f" class="">
</p><p id="24ce65bc-2ec5-8107-8311-e9bf6b6a58a2" class="">Then we go to GitHub account:</p><p id="24ce65bc-2ec5-817b-b2be-c15208484d30" class="">Create Repo from UI</p><figure id="24ce65bc-2ec5-81f5-9d5e-d1b41bd4b3db" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2032.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2032.png"/></a></figure><p id="24ce65bc-2ec5-8104-9010-e0fb0145f274" class="">
</p><figure id="24ce65bc-2ec5-8108-b299-e14c10eaea8a" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2033.png"><img style="width:1423.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2033.png"/></a></figure><p id="24ce65bc-2ec5-8171-8166-f37f6eedb415" class="">
</p><p id="24ce65bc-2ec5-8185-b21e-c8316404777f" class=""><mark class="highlight-teal"><code><a href="https://github.com/TEDDY201289/Netflix-test/settings/hooks/562924452?tab=settings">https://github.com/TEDDY201289/Netflix-test/settings/hooks/562924452?tab=settings</a></code></mark></p><p id="24ce65bc-2ec5-81ff-a043-d9425f01f9b1" class="">Add webhook with payload URL (jenkins) to get automated triggering for CI between GitHub and Jenkins</p><figure id="24ce65bc-2ec5-81b9-bf26-d8034fd59e34" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2034.png"><img style="width:1423.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2034.png"/></a></figure><p id="24ce65bc-2ec5-8140-9de1-d0cd64c05353" class="">
</p><p id="24ce65bc-2ec5-812f-9656-fa385f87ddfa" class=""><strong>Then , Go to Docker hub, and create new repo </strong></p><figure id="24ce65bc-2ec5-81d8-a90f-de2804ec1685" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2035.png"><img style="width:1424px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2035.png"/></a></figure><p id="24ce65bc-2ec5-81e2-b11c-c3fafd13021e" class="">
</p><h3 id="24ce65bc-2ec5-8140-a05a-c1aadc9220bf" class=""><strong>Create Pipeline</strong></h3><figure id="24ce65bc-2ec5-81d6-a365-d5d0b1d1c735" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2036.png"><img style="width:1423.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2036.png"/></a></figure><p id="24ce65bc-2ec5-81c5-896d-ef6b74d263d5" class=""><div class="indented"><figure id="24ce65bc-2ec5-81e6-a65d-c346807adc5d" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2037.png"><img style="width:1399.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2037.png"/></a></figure><figure id="24ce65bc-2ec5-81f1-aff2-f393698d0517" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2038.png"><img style="width:1399.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2038.png"/></a></figure><figure id="24ce65bc-2ec5-8197-b8ed-daf54ab6c91e" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2039.png"><img style="width:2596px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2039.png"/></a></figure></div></p><p id="24ce65bc-2ec5-8150-8cc7-e6ce59bab67e" class="">
</p><p id="24ce65bc-2ec5-816d-9805-c9c8ad9d23a2" class="">Now, we gonna to set up for EKS cluster as below:</p><h3 id="24ce65bc-2ec5-815c-8c3e-c02dfa0adc09" class="">Install eksctl</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8130-bcae-ffdcdab2f950" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">curl --silent --location &quot;https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz&quot; | tar xz -C /tmp
cd /tmp
sudo mv /tmp/eksctl /bin
eksctl version</code></pre><p id="24ce65bc-2ec5-8129-b012-cba11a2e93dd" class="">
</p><p id="24ce65bc-2ec5-81a6-92e1-f9b366e6ac93" class="">Create Cluster</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8173-83b3-cc9e0737059e" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">eksctl create cluster --name netflix-cluster \
--region us-east-1 \
--node-type t3.large \
--nodes 3
--profile teddy-kube</code></pre><p id="24ce65bc-2ec5-8152-929d-f29050a8a3dd" class="">Wait for 30 mins minimum then Cluster is up</p><h3 id="24ce65bc-2ec5-815f-b62d-d2987e11aa9a" class="">Verify Cluster</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81a6-bb7f-c3ecbaaff087" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">kubectl get nodes
kubectl get svc</code></pre><p id="24ce65bc-2ec5-81ca-9290-d945a1cf7516" class=""><strong>EKS</strong></p><figure id="24ce65bc-2ec5-816b-9f0d-e0a662277509" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2040.png"><img style="width:1423.921875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2040.png"/></a></figure><p id="24ce65bc-2ec5-81e0-ad63-fd09cfb1655d" class=""><strong>EC2</strong></p><figure id="24ce65bc-2ec5-8106-9dea-cd1ed5fcc36b" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2041.png"><img style="width:1424px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2041.png"/></a></figure><p id="24ce65bc-2ec5-81fb-81f9-f8b0a226f13e" class=""><strong>VPC</strong></p><figure id="24ce65bc-2ec5-81f9-9d15-d1a4ade24007" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2042.png"><img style="width:1424px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2042.png"/></a></figure><p id="24ce65bc-2ec5-81d4-86cd-e73b73b14d39" class=""><strong>Subnet Mask</strong></p><figure id="24ce65bc-2ec5-818f-99ec-cd7668113415" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2043.png"><img style="width:1423.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2043.png"/></a></figure><p id="24ce65bc-2ec5-81f9-bdf7-faeb554ba761" class="">Then Go to check at Kubernetes &gt;&gt; k8s-sa</p><p id="24ce65bc-2ec5-8149-b80e-f3af98774929" class="">
</p><figure id="24ce65bc-2ec5-815a-8748-df11354c97bf" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2044.png"><img style="width:271px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2044.png"/></a></figure><p id="24ce65bc-2ec5-81e1-a9eb-ec01af937c87" class=""><strong>jenkins-sa.yml</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81f0-85d3-f5a474746683" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">apiVersion: v1
kind: ServiceAccount
metadata:
  name: jenkins
  namespace: default</code></pre><p id="24ce65bc-2ec5-81eb-9dd0-e56403c8e6e5" class="">
</p><p id="24ce65bc-2ec5-813f-bc9f-d813aa8effb1" class=""><strong>Jenkins-Token.yaml</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8151-828d-f52eadf80e55" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">apiVersion: v1
kind: Secret
metadata:
  name: jenkins-token
  namespace: default
  annotations:
    kubernetes.io/service-account.name: jenkins
type: kubernetes.io/service-account-token
</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8195-a99a-fa7c279023fb" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac .aws % kubectl get secret
NAME            TYPE                                  DATA   AGE
jenkins-token   kubernetes.io/service-account-token   3      37h</code></pre><p id="24ce65bc-2ec5-81b6-b431-d6d43f7e1a87" class=""><strong>Retrieve token</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8121-a938-cde73f5d5bdc" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">kubectl apply -f jenkins-token.yml
kubectl get secret jenkins-token -n default -o jsonpath=&#x27;{.data.token}&#x27; | base64 --decode

teddyyekyawthu@mac .aws % kubectl get secret jenkins-token -n default -o jsonpath=&#x27;{.data.token}&#x27; | base64 --decode
eyJhbGciOiJSUzI1NiIsImtpZCI6IjNpZW1hUEYyUkpqUll1MTVTbDhHSVRhSE5VQ2NIU1VFR0I1UU8zdjVHQ1UifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImplbmtpbnMtdG9rZW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiamVua2lucyIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6ImQwYTQwNTJmLTlmOGQtNDAwMS1iMjBkLTRkNTI4M2JmN2U3ZiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmplbmtpbnMifQ.N02ZFtlcdBcdKzW3D7i3kVf8sTu1TMF8HJqSxo0K7DgkP-96hs2unAfxkFfuXPvneHjSTV3Qsv34mkbbBeLJ7MSKdQredFCfe-v53yYG3jMN96u_h2nPwf9jvp4pAqUanLng0hxzRofTwU3aJzQ0_gDcPIkscKchazB7Mi3lMdwVqYIGjRqMUVbBl6JomcoJviZ6ui_3RTiu2tbXmLi36KP6VGl7cJ24x0oBHeArgiB3DXoyAKJb8wXOb33iL8uklcTEbGdc9RLZnRIVgd9OJrAuYcSSuVBFADkI0U-PY6BmRIY0If_KHbXIGwICSod7nlGNxC1X07jTqn3WfFGOYQ
</code></pre><p id="24ce65bc-2ec5-81fb-b96f-c2d0e4d782c5" class=""><div class="indented"><ol type="1" id="24ce65bc-2ec5-8189-972d-f1ddf8766d9a" class="numbered-list" start="1"><li>Store the token in Jenkins (Credentials ID: kubernetes).</li></ol><ol type="1" id="24ce65bc-2ec5-8183-85fe-ce725da9a50c" class="numbered-list" start="2"><li>Get the EKS API server URL:</li></ol><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8178-8dbc-fbab7ce416ee" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">aws eks describe-cluster --name netflix-cluster --query &#x27;cluster.endpoint&#x27; --output text

teddyyekyawthu@mac .aws % aws eks describe-cluster --name netflix-cluster1 --query &#x27;cluster.endpoint&#x27; --output text --profile teddy-kube
https://ABCD027AC4657D748C746D37AC3C7DFE.gr7.ap-southeast-1.eks.amazonaws.com</code></pre><figure id="24ce65bc-2ec5-8106-8941-dad2024c03c8" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2045.png"><img style="width:1427.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2045.png"/></a></figure><p id="24ce65bc-2ec5-8162-8466-ce768be0eb25" class=""><mark class="highlight-red"><code>aws eks describe-cluster --name netflix-cluster1 --query &#x27;cluster.endpoint&#x27; --output text --profile teddy-kube<br/>https://ABCD027AC4657D748C746D37AC3C7DFE.gr7.ap-southeast-1.eks.amazonaws.com</code></mark></p><p id="24ce65bc-2ec5-81de-98a7-e54ae8c1da01" class="">edit in jenkins file</p><figure id="24ce65bc-2ec5-8182-a2b5-d3e5706c4037" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2046.png"><img style="width:2568px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2046.png"/></a></figure></div></p><p id="24ce65bc-2ec5-81c3-8fed-f40fae6fe921" class="">
</p><p id="24ce65bc-2ec5-812f-8465-dfbffe881b73" class=""><strong>RBAC.yaml</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8164-847d-d24de711f08e" class="code code-wrap"><code class="language-HCL" style="white-space:pre-wrap;word-break:break-all">apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: jenkins-deployer
  namespace: default
rules:
- apiGroups: [&quot;&quot;, &quot;apps&quot;]
  resources: [&quot;deployments&quot;, &quot;services&quot;, &quot;pods&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;create&quot;, &quot;update&quot;, &quot;delete&quot;, &quot;patch&quot;]
- apiGroups: [&quot;&quot;]
  resources: [&quot;deployments&quot;]
  verbs: [&quot;watch&quot;]

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: jenkins-deployer-binding
  namespace: default
subjects:
- kind: ServiceAccount
  name: jenkins
  namespace: default
roleRef:
  kind: Role
  name: jenkins-deployer
  apiGroup: rbac.authorization.k8s.io</code></pre><p id="24ce65bc-2ec5-8133-a54b-de09832a84bd" class="">Jenkins File Setting up</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8153-8805-d07664eb308c" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">pipeline {
    agent any
    
    parameters {
        string(name: &#x27;MAJOR_VERSION&#x27;, defaultValue: &#x27;1&#x27;, description: &#x27;Major version for the Docker image tag (e.g., 1 for v1.x)&#x27;)
    }
    
    tools {
        jdk &#x27;jdk21&#x27;
        nodejs &#x27;node20&#x27;
    }
    
    environment {
        SCANNER_HOME = tool &#x27;sonarqube-scanner&#x27;
        TRIVY_HOME = &#x27;/usr/bin&#x27;
        REPO_URL = &#x27;https://github.com/TEDDY201289/Netflix-test.git&#x27;
        REPO_BRANCH = &#x27;main&#x27;
        DOCKER_IMAGE_NAME = &#x27;teddy2012/netflix-bubudu&#x27;
        SONAR_PROJECT_NAME = &#x27;Netflix&#x27;
        SONAR_PROJECT_KEY = &#x27;Netflix&#x27;
        DOCKER_CREDENTIALS_ID = &#x27;dockerhub&#x27;
        SONAR_CREDENTIALS_ID = &#x27;SonarQube-Token&#x27;
        KUBERNETES_CREDENTIALS_ID = &#x27;kubernetes&#x27;
        SONAR_SERVER = &#x27;SonarQube-Server&#x27;
        DOCKER_TOOL_NAME = &#x27;docker&#x27;
        TRIVY_FS_REPORT = &#x27;trivyfs.txt&#x27;
        TRIVY_IMAGE_REPORT = &#x27;trivyimage.txt&#x27;
        K8S_NAMESPACE = &#x27;default&#x27;
        APP_NAME = &#x27;netflix&#x27;
    }
    
    stages {
        stage(&#x27;Clean Workspace&#x27;) {
            steps {
                cleanWs()
            }
            post {
                always {
                    echo &quot;Workspace cleaned successfully&quot;
                }
            }
        }
        stage(&#x27;Checkout from Git&#x27;) {
            steps {
                git branch: &quot;${REPO_BRANCH}&quot;, url: &quot;${REPO_URL}&quot;, credentialsId: &#x27;github-credentials&#x27;
            }
        }
        stage(&#x27;SonarQube Analysis&#x27;) {
            steps {
                withSonarQubeEnv(credentialsId: &quot;${SONAR_CREDENTIALS_ID}&quot;, installationName: &quot;${SONAR_SERVER}&quot;) {
                    sh &quot;&quot;&quot;
                    ${SCANNER_HOME}/bin/sonar-scanner \
                        -Dsonar.projectName=${SONAR_PROJECT_NAME} \
                        -Dsonar.projectKey=${SONAR_PROJECT_KEY}
                    &quot;&quot;&quot;
                }
            }
        }
        stage(&#x27;Quality Gate&#x27;) {
            steps {
                script {
                    waitForQualityGate abortPipeline: false, credentialsId: &quot;${SONAR_CREDENTIALS_ID}&quot;
                }
            }
        }
        stage(&#x27;Install Dependencies&#x27;) {
            steps {
                script {
                    def nodeHome = tool name: &#x27;node20&#x27;, type: &#x27;nodejs&#x27;
                    env.PATH = &quot;${nodeHome}/bin:${env.PATH}&quot;
                    sh &quot;node --version&quot;
                    sh &quot;npm --version&quot;
                    sh &quot;npm install&quot;
                }
            }
            post {
                failure {
                    echo &quot;Failed to install dependencies. Check Node.js setup or package.json.&quot;
                }
            }
        }
        // stage(&#x27;OWASP Dependency Check&#x27;) {
        //     steps {
        //         withCredentials([string(credentialsId: &#x27;nvd-api-key&#x27;, variable: &#x27;NVD_API_KEY&#x27;)]) {
        //             dependencyCheck additionalArguments: &quot;--scan ./ --disableYarnAudit --disableNodeAudit --nvdApiKey ${NVD_API_KEY}&quot;, odcInstallation: &#x27;DP-Check&#x27;
        //             dependencyCheckPublisher pattern: &#x27;**/dependency-check-report.xml&#x27;
        //         }
        //     }
        // }
        stage(&#x27;Trivy FS Scan&#x27;) {
            steps {
                script {
                    sh &quot;${TRIVY_HOME}/trivy fs . &gt; ${TRIVY_FS_REPORT}&quot;
                }
            }
            post {
                always {
                    archiveArtifacts artifacts: &quot;${TRIVY_FS_REPORT}&quot;, allowEmptyArchive: true
                }
            }
        }
        stage(&#x27;Set Version&#x27;) {
            steps {
                script {
                    def buildNumber = env.BUILD_NUMBER ?: &#x27;0&#x27;
                    env.IMAGE_TAG = &quot;v${params.MAJOR_VERSION}.${buildNumber}&quot;
                    echo &quot;Docker image will be tagged as: ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                }
            }
        }
        stage(&#x27;Docker Build &amp; Push&#x27;) {
            steps {
                withCredentials([string(credentialsId: &#x27;tmdb-api-key&#x27;, variable: &#x27;TMDB_API_KEY&#x27;)]) {
                    script {
                        withDockerRegistry(credentialsId: &quot;${DOCKER_CREDENTIALS_ID}&quot;, toolName: &quot;${DOCKER_TOOL_NAME}&quot;) {
                            sh &quot;docker build -t ${APP_NAME} --build-arg TMDB_V3_API_KEY=${TMDB_API_KEY} .&quot;
                            sh &quot;docker tag ${APP_NAME} ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                            sh &quot;docker push ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}&quot;
                        }
                    }
                }
            }
            post {
                always {
                    sh &quot;docker rmi ${APP_NAME} ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG} || true&quot;
                }
            }
        }
        stage(&#x27;Trivy Image Scan&#x27;) {
            steps {
                script {
                    sh &quot;${TRIVY_HOME}/trivy image ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG} &gt; ${TRIVY_IMAGE_REPORT}&quot;
                }
            }
            post {
                always {
                    archiveArtifacts artifacts: &quot;${TRIVY_IMAGE_REPORT}&quot;, allowEmptyArchive: true
                }
            }
        }
        stage(&#x27;Deploy to Kubernetes&#x27;) {
            steps {
                withCredentials([[
                    $class: &#x27;AmazonWebServicesCredentialsBinding&#x27;,
                    credentialsId: &#x27;aws-secret&#x27;
                ]]) {
                    script {
                        dir(&#x27;Kubernetes&#x27;) {
                            withKubeConfig(
                                credentialsId: &quot;${KUBERNETES_CREDENTIALS_ID}&quot;,
                                serverUrl: &#x27;https://ABCD027AC4657D748C746D37AC3C7DFE.gr7.ap-southeast-1.eks.amazonaws.com&#x27;, // Replace with actual EKS endpoint
                                namespace: &quot;${K8S_NAMESPACE}&quot;
                            ) {
                                sh &#x27;kubectl version&#x27;
                                sh &quot;sed -i &#x27;s|image: ${DOCKER_IMAGE_NAME}:.*|image: ${DOCKER_IMAGE_NAME}:${env.IMAGE_TAG}|&#x27; deployment.yml&quot;
                                sh &#x27;kubectl apply -f deployment.yml&#x27;
                                sh &#x27;kubectl apply -f service.yml&#x27;
                            }
                        }
                    }
                }
            }
        }
    }
    post {
        always {
            emailext attachLog: true,
                subject: &quot;&#x27;${currentBuild.result}&#x27;&quot;,
                body: &quot;Project: ${env.JOB_NAME}&lt;br/&gt;&quot; +
                      &quot;Build Number: ${env.BUILD_NUMBER}&lt;br/&gt;&quot; +
                      &quot;URL: ${env.BUILD_URL}&lt;br/&gt;&quot;,
                to: &#x27;hlaingminpaing.ygn@gmail.com&#x27;, // Update with your email
                attachmentsPattern: &#x27;trivyfs.txt,trivyimage.txt&#x27;
        }
    }
}</code></pre><h3 id="24ce65bc-2ec5-81a7-9d1e-d944edbb5069" class=""><strong>ALB installation on EKS</strong></h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8145-9c03-d3f19d76c6f2" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all"># Download an IAM policy for the AWS Load Balancer Controller that allows it to make calls to AWS APIs on your behalf.
curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.13.0/docs/install/iam_policy.json
# Create an IAM policy using the policy downloaded in the previous step.</code></pre><p id="24ce65bc-2ec5-8115-aa5c-ce4759ddb17b" class=""><code>export AWS_PROFILE=profilename</code> (Export profile name)</p><p id="24ce65bc-2ec5-81b4-b54e-d36ed1ac9df7" class=""><code>export AWS_PROFILE=teddy-kube</code></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81db-b30c-c95314668640" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all"># Create an IAM policy using the policy downloaded in the previous step.
aws iam create-policy \
    --policy-name AWSLoadBalancerControllerIAMPolicy \
    --policy-document file://iam_policy.json \
    --profile teddy-kube</code></pre><p id="24ce65bc-2ec5-815a-8fac-d61ce6883b0f" class="">
</p><figure id="24ce65bc-2ec5-8143-bd61-f0b385e94917" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2047.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2047.png"/></a></figure><figure id="24ce65bc-2ec5-81d6-b97c-de996788755b" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2048.png"><img style="width:1451.953125px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2048.png"/></a></figure><p id="24ce65bc-2ec5-815c-bdb2-c655a5c649f7" class="">No entities attached , so OIDC is required to run.</p><p id="24ce65bc-2ec5-81e8-a793-e551896573fd" class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81f1-94fe-cf9e46b32244" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all"># Create OIDC provider (eksctl)
cluster_name=&lt;my-cluster&gt;
oidc_id=$(aws eks describe-cluster --name $cluster_name --query &quot;cluster.identity.oidc.issuer&quot; --output text | cut -d &#x27;/&#x27; -f 5)
echo $oidc_id</code></pre><p id="24ce65bc-2ec5-816c-9e99-c3918fd7daa3" class="">check iam policy</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-817e-8315-d2c9c0ab44ba" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">eksctl utils associate-iam-oidc-provider --cluster netflix-cluster1 --approve
eksctl create iamserviceaccount \
    --cluster=netflix-cluster1 \
    --namespace=kube-system \
    --name=aws-load-balancer-controller \
    --attach-policy-arn=arn:aws:iam::774305596727:policy/AWSLoadBalancerControllerIAMPolicy \
    --override-existing-serviceaccounts \
    --region ap-southeast-1 \
    --approve
    --profile teddy-kube</code></pre><figure id="24ce65bc-2ec5-81ce-ab1e-f243ea1493c6" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2049.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2049.png"/></a></figure><p id="24ce65bc-2ec5-8121-a1fd-d67274b6c000" class="">
</p><p id="24ce65bc-2ec5-8116-a048-f7f5309dc5fa" class="">
</p><p id="24ce65bc-2ec5-81ff-9621-e083cf44635e" class="">Install AWS Load Balancer Controller (ALB)</p><p id="24ce65bc-2ec5-81b5-8389-e0228d7e6cce" class="">Add the eks-charts Helm chart repository. AWS maintains this repository on GitHub.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-813f-b1a8-d551d4c54e5c" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">helm repo add eks https://aws.github.io/eks-charts
helm repo update eks
helm install aws-load-balancer-controller eks/aws-load-balancer-controller \
  -n kube-system \
  --set clusterName=my-cluster \
  --set serviceAccount.create=false \
  --set serviceAccount.name=aws-load-balancer-controller \
  --version 1.13.0
kubectl get deployment -n kube-system aws-load-balancer-controller

teddyyekyawthu@mac .aws % kubectl get deployment -n kube-system aws-load-balancer-controller
NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
aws-load-balancer-controller   2/2     2            2           37h</code></pre><p id="24ce65bc-2ec5-819b-99dc-fb9299c1a373" class="">
</p><p id="24ce65bc-2ec5-817f-a2c6-ca4831f0d7d9" class="">If not working with eksctl Create OIDC provider (AWS Console)</p><ul id="24ce65bc-2ec5-8128-af5d-cbdfe4aa7400" class="bulleted-list"><li style="list-style-type:disc">Open the Amazon EKS console.</li></ul><ul id="24ce65bc-2ec5-8129-84f4-ffda3ab7057c" class="bulleted-list"><li style="list-style-type:disc">In the left pane, select Clusters, and then select the name of your cluster on the Clusters page.</li></ul><ul id="24ce65bc-2ec5-8167-8deb-cdcbd37e0071" class="bulleted-list"><li style="list-style-type:disc">In the Details section on the Overview tab, note the value of the OpenID Connect provider URL.</li></ul><ul id="24ce65bc-2ec5-8138-8ad1-cc5bb7493571" class="bulleted-list"><li style="list-style-type:disc">Open the IAM console at <a href="https://console.aws.amazon.com/iam/">https://console.aws.amazon.com/iam/</a>.</li></ul><ul id="24ce65bc-2ec5-8150-9c07-c15990d79a2c" class="bulleted-list"><li style="list-style-type:disc">In the left navigation pane, choose Identity Providers under Access management. If a Provider is listed that matches the URL for your cluster, then you already have a provider for your cluster. If a provider isn’t listed that matches the URL for your cluster, then you must create one.</li></ul><ul id="24ce65bc-2ec5-81da-9fea-e8047dc0bebd" class="bulleted-list"><li style="list-style-type:disc">To create a provider, choose Add provider.</li></ul><ul id="24ce65bc-2ec5-8107-86e9-c61416acc037" class="bulleted-list"><li style="list-style-type:disc">For Provider type, select OpenID Connect.</li></ul><ul id="24ce65bc-2ec5-816e-a17a-e8f843d75b9e" class="bulleted-list"><li style="list-style-type:disc">For Provider URL, enter the OIDC provider URL for your cluster.</li></ul><ul id="24ce65bc-2ec5-81a5-85b6-fe9a111c1b7a" class="bulleted-list"><li style="list-style-type:disc">For Audience, enter sts.amazonaws.com.</li></ul><ul id="24ce65bc-2ec5-81f1-b654-c0863e8de3dd" class="bulleted-list"><li style="list-style-type:disc">(Optional) Add any tags, for example a tag to identify which cluster is for this provider.</li></ul><ul id="24ce65bc-2ec5-81b7-bc5f-c15af1bc0d80" class="bulleted-list"><li style="list-style-type:disc">Choose Add provider.</li></ul><p id="24ce65bc-2ec5-812f-a70e-d43ae550311f" class="">ingress.yaml</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81f7-b503-e4d3106c94d3" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  namespace: default
  name: ingress
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
spec:
  ingressClassName: alb
  rules:
  - host: netflix.bubududu.life
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: netflix-app
            port:
              number: 80
  # apiVersion: networking.k8s.io/v1
  # kind: Ingress
  # metadata:
  #   namespace: default
  #   name: ingress
  #   annotations:
  #     alb.ingress.kubernetes.io/scheme: internet-facing
  #     alb.ingress.kubernetes.io/target-type: ip
  #     # alb.ingress.kubernetes.io/listen-ports: &#x27;[{&quot;HTTP&quot;: 80}]&#x27;
  #     alb.ingress.kubernetes.io/listen-ports: &#x27;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#x27;
  #     alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-southeast-1:537467926164:certificate/aa669601-04ad-4e78-96a2-077ac68623b6
  #     alb.ingress.kubernetes.io/ssl-redirect: &#x27;443&#x27;
  #     kubernetes.io/ingress.class: alb
  # spec:
  #   # ingressClassName: alb
  #   rules:
  #     - host: netflix.myanmartechsolutions.site
  #       http:
  #         paths:
  #           - path: /
  #             pathType: Prefix
  #             backend:
  #               service:
  #                 name: netflix-app
  #                 port:
  #                   number: 80
  # - host: youtube.myanmartechsolutions.site
  #   http:
  #     paths:
  #       - path: /
  #         pathType: Prefix
  #         backend:
  #           service:
  #             name: youtube-clone
  #             port:
  #               number: 80
</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81fc-a618-eb1f2ca4ff91" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac Kubernetes % kubectl get ingress             
NAME      CLASS   HOSTS                   ADDRESS                                                                      PORTS   AGE
ingress   alb     netflix.bubududu.life   k8s-default-ingress-d940d6d82e-1249514683.ap-southeast-1.elb.amazonaws.com   80      37h</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81d8-a11c-d46aabb2e00b" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">#running svc type would be Loadbalancer , so needs to change back ClusterIP else ALB will not work.

teddyyekyawthu@mac Kubernetes % kubectl edit svc netflix-app

# Please edit the object below. Lines beginning with a &#x27;#&#x27; will be ignored,
# and an empty file will abort the edit. If an error occurs while saving this file will be
# reopened with the relevant failures.
#
apiVersion: v1
kind: Service
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
  creationTimestamp: &quot;2025-08-09T13:03:27Z&quot;
  labels:
    app: netflix-app
  name: netflix-app
  namespace: default
  resourceVersion: &quot;10055&quot;
  uid: a3a39e64-34d1-4dbb-95c0-5f37bf84ae64
spec:
  clusterIP: 10.100.220.54
  clusterIPs:
  - 10.100.220.54
  internalTrafficPolicy: Cluster
  ipFamilies:
  - IPv4
  ipFamilyPolicy: SingleStack
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
  selector:
    app: netflix-app
  sessionAffinity: None
  type: ClusterIP #change the IP type from LoadBalancer to ClusterIP
status:
  loadBalancer: {}
</code></pre><p id="24ce65bc-2ec5-81d8-82f6-c0cd6f0008dd" class="">
</p><p id="24ce65bc-2ec5-8126-a068-dab2bec85962" class=""><strong>running svc type would be Loadbalancer , so needs to change back ClusterIP else ALB will not work.</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-81d3-baa6-d127e6e5d506" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac .aws % kubectl get svc 
NAME          TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
kubernetes    ClusterIP   10.100.0.1      &lt;none&gt;        443/TCP   38h
netflix-app   ClusterIP   10.100.220.54   &lt;none&gt;        80/TCP    38h</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8180-9691-c3591d9a30f9" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">k8s-default-ingress-d940d6d82e-1249514683.ap-southeast-1.elb.amazonaws.com.
52.220.67.87
18.139.120.226
13.214.251.191</code></pre><p id="24ce65bc-2ec5-8174-b346-df717efc1936" class="">back to Push (CICD)</p><p id="24ce65bc-2ec5-81f2-ae31-e88648eab4a4" class="">Go to path what we want to push via Git</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="24ce65bc-2ec5-8122-b43f-f51601312cde" class="code code-wrap"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">teddyyekyawthu@mac netflix-test % pwd                                                              
/Users/teddyyekyawthu/Teddy-files/netflix-test</code></pre><p id="24ce65bc-2ec5-81aa-87b9-c88a6a6f1f59" class=""><code>ssh -T </code><code><a href="mailto:git@github.com">git@github.com</a></code><code> </code>(#authentication)</p><p id="24ce65bc-2ec5-816b-9492-dc17eba292fe" class=""><code><strong>rm -rf .git</strong></code><strong> (optional)</strong></p><p id="24ce65bc-2ec5-81fb-93e1-fe0dd6e39a91" class=""><code>git init</code></p><p id="24ce65bc-2ec5-811e-9cc8-d182709d3bea" class=""><code>git add .</code></p><p id="24ce65bc-2ec5-81e6-91cc-f8d7d4e09f4d" class=""><code> git commit -m &quot;added </code><code><a href="http://output.tf/">output.tf</a></code><code>&quot;</code></p><p id="24ce65bc-2ec5-81ee-9581-f0f1cccdd642" class=""><code>git branch -M main</code></p><p id="24ce65bc-2ec5-81ab-ab4c-e129b71de81a" class=""><code>git push -u origin main</code></p><p id="24ce65bc-2ec5-818e-85d4-f0c7917c58e9" class="">
</p><figure id="24ce65bc-2ec5-81e2-a635-e9f29bc6b553" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2050.png"><img style="width:3004px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2050.png"/></a></figure><p id="24ce65bc-2ec5-8166-9548-e964e9972439" class="">
</p><p id="24ce65bc-2ec5-8140-95e9-d92d5b5ea6f4" class=""><strong>Go to Godaddy</strong></p><p id="24ce65bc-2ec5-8178-9fbe-d13b3ee3d9a4" class=""><a href="https://dcc.godaddy.com/control/dnsmanagement?domainName=bubududu.life&amp;subtab=nameservers">https://dcc.godaddy.com/control/dnsmanagement?domainName=bubududu.life&amp;subtab=nameservers</a> </p><p id="24ce65bc-2ec5-81ed-a93e-cbec0fd898f4" class="">
</p><p id="24ce65bc-2ec5-817d-9719-f82a1ff96a1d" class="">add Nameserver based on Cloudflare DNS information:</p><figure id="24ce65bc-2ec5-8112-9121-d49dcb9d84bf" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2051.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2051.png"/></a></figure><p id="24ce65bc-2ec5-8108-88c9-d17d7c358c6c" class="">
</p><p id="24ce65bc-2ec5-8106-97bc-f8af48d2311c" class=""><strong>Cloudflare</strong></p><p id="24ce65bc-2ec5-8159-80be-e51591f5c534" class=""><a href="https://dash.cloudflare.com/2d979a5d2c1c7389c0f62a7968ec1140/bubududu.life/dns/records">https://dash.cloudflare.com/2d979a5d2c1c7389c0f62a7968ec1140/bubududu.life/dns/records</a> </p><p id="24ce65bc-2ec5-81f8-ad3f-cfee2eaa211e" class="">
</p><figure id="24ce65bc-2ec5-8123-929d-e9d5a346ccee" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2052.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2052.png"/></a></figure><p id="24ce65bc-2ec5-81dc-b165-d889226caadb" class="">
</p><figure id="24ce65bc-2ec5-816a-bcb3-c04b58c55a54" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2053.png"><img style="width:1451.96875px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2053.png"/></a></figure><figure id="24ce65bc-2ec5-8184-935a-c7069545c67f" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2054.png"><img style="width:1451.984375px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2054.png"/></a></figure><figure id="24ce65bc-2ec5-8160-9589-dcba08274432" class="image"><a href="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2055.png"><img style="width:1044px" src="%F0%9F%87%AC%F0%9F%87%A7%F0%9F%87%AF%F0%9F%87%B5%F0%9F%87%B8%F0%9F%87%AC%F0%9F%87%B8%F0%9F%87%AC%20CICD%20Group%20Activity%20(by%20using%20Jenkins%20Pip%2024ce65bc2ec580228572de0a497d5442/image%2055.png"/></a></figure></details></li></ul><p id="24ce65bc-2ec5-8116-9e10-d72e41fe6082" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>